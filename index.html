<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Simple FastAPI DB</title>
  <!-- Bootstrap CDN -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" />
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet" />
  <!-- Font Awesome -->
  <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
  <style>
    body {
      font-family: "Poppins", sans-serif;
      background: #f4f7fa;
      color: #333;
    }
    .main-heading {
      background: linear-gradient(to right, #00c6ff, #0072ff);
      color: white;
      text-align: center;
      padding: 30px 20px;
      margin-bottom: 40px;
      border-radius: 0 0 20px 20px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    }
    .main-heading h1 {
      font-weight: 700;
      font-size: 42px;
    }
    .card-prob {
      background-color: white;
      border: none;
      border-radius: 15px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
      padding: 30px;
      margin: 0 auto;
      max-width: 1000px;
    }
    .section-title {
      font-size: 24px;
      font-weight: 600;
      color: #0072ff;
      margin-top: 30px;
    }
    .icon {
      color: #00c6ff;
      margin-right: 10px;
    }
    pre {
      background: #f0f8ff;
      padding: 20px;
      border-radius: 10px;
      font-size: 16px;
      overflow-x: auto;
    }
    .note-box {
      background: #fff5e6;
      border-left: 5px solid #ff9500;
      padding: 15px 20px;
      margin: 20px 0;
      border-radius: 8px;
    }
    .footer {
      text-align: center;
      margin: 60px 0 20px;
      color: #aaa;
    }
    .nav-buttons {
      display: flex;
      justify-content: space-between;
      max-width: 1000px;
      margin: 40px auto 20px;
      padding: 0 20px;
    }
    .btn-custom {
      width: 120px;
      font-weight: 600;
      border-radius: 30px;
    }
  </style>
</head>
<body>

<div class="main-heading">
  <h1><i class="fas fa-database"></i> FastAPI Dictionary DB</h1>
</div>

<div class="card card-prob">

  <h3 class="section-title"><i class="fas fa-tasks icon"></i>Assignment</h3>
  <p>
    Create a simple REST API using FastAPI that mimics a basic database with Python dictionaries, strictly enforcing data validation through Pydantic. Define a User model with fields like <code>id</code>, <code>name</code>, <code>email</code>, and optional <code>age</code>, and store users in a dictionary keyed by id. 
    Implement two endpoints: <strong>GET /users</strong> to list all users, and <strong>POST /users</strong> to insert a new user, ensuring duplicate IDs are rejected. 
    The project must use only Pydantic for validation and avoid external databases. Optional enhancements include fetching or deleting users by ID.
  </p>

  <h3 class="section-title"><i class="fas fa-code icon"></i>Python Code</h3>
  <pre><code># main.py
from fastapi import FastAPI, HTTPException
from pydantic import BaseModel, EmailStr
from typing import Optional, Dict

app = FastAPI(title="Simple DB API")

# Pydantic model
class User(BaseModel):
    id: int
    name: str
    email: EmailStr
    age: Optional[int] = None

# In-memory dictionary as DB
users_db: Dict[int, User] = {}

@app.get("/users", response_model=dict[int, User])
def list_users():
    return users_db

@app.post("/users", response_model=User)
def create_user(user: User):
    if user.id in users_db:
        raise HTTPException(status_code=400, detail="User with this ID already exists")
    users_db[user.id] = user
    return user

@app.get("/users/{user_id}", response_model=User)
def get_user(user_id: int):
    if user_id not in users_db:
        raise HTTPException(status_code=404, detail="User not found")
    return users_db[user_id]

@app.delete("/users/{user_id}")
def delete_user(user_id: int):
    if user_id not in users_db:
        raise HTTPException(status_code=404, detail="User not found")
    deleted_user = users_db.pop(user_id)
    return {"message": "User deleted successfully", "user": deleted_user}

if __name__=="__main__":
    import uvicorn 
    uvicorn.run(app)
</code></pre>

  <h3 class="section-title"><i class="fas fa-terminal icon"></i>Sample Outputs</h3>
  <pre><code>POST /users
Body:
{
  "id": 1,
  "name": "Bhargav",
  "email": "bhargav@example.com",
  "age": 22
}
‚Üí 201 Created

GET /users
‚Üí { "1": { "id": 1, "name": "Bhargav", "email": "bhargav@example.com", "age": 22 } }

GET /users/1
‚Üí { "id": 1, "name": "Bhargav", "email": "bhargav@example.com", "age": 22 }

DELETE /users/1
‚Üí { "message": "User deleted successfully", "user": { ... } }
</code></pre>

  <h3 class="section-title"><i class="fas fa-info-circle icon"></i>Explanation</h3>
  <ul>
    <li><strong>FastAPI + Pydantic:</strong> Automatically validates data using type hints.</li>
    <li><code>BaseModel</code>: Ensures email format is valid, and age is optional.</li>
    <li><strong>In-Memory DB:</strong> Dictionary <code>users_db</code> mimics a database.</li>
    <li><strong>Validation:</strong> Duplicate IDs are rejected with a 400 error.</li>
    <li><strong>Optional Routes:</strong> View or delete user by ID for additional functionality.</li>
  </ul>

  <div class="note-box">
    <h5><i class="fas fa-lightbulb icon"></i>Note:</h5>
    <ul>
      <li>üîÑ Data will reset every time the server restarts since no real DB is used.</li>
      <li>üìß Email field is automatically validated by Pydantic's <code>EmailStr</code>.</li>
      <li>üö´ Duplicate IDs are blocked using simple dictionary logic.</li>
    </ul>
  </div>

</div>


<div class="footer">
  &copy; 2025 FastAPI Assignment ‚Ä¢ Designed with ‚ù§Ô∏è
</div>

</body>
</html>

